# SYMPHONI.A - Subscriptions & Contracts API - Environment Variables
# Version: v1.6.2 (SYMPHONI.A Complete - 100% Conformity)

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Node environment (development, production)
NODE_ENV=production

# Server port (default: 8080 for EB)
PORT=8080

# CORS allowed origin
CORS_ORIGIN=https://your-frontend-domain.com

# =============================================================================
# MONGODB CONFIGURATION
# =============================================================================

# MongoDB connection URI
# Format: mongodb+srv://username:password@cluster.mongodb.net/database
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/rt-subscriptions-contracts?retryWrites=true&w=majority

# =============================================================================
# JWT AUTHENTICATION CONFIGURATION (v2.6.0)
# =============================================================================

# Secret key for JWT access tokens (CHANGE IN PRODUCTION!)
# Generate with: openssl rand -base64 64
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Secret key for JWT refresh tokens (CHANGE IN PRODUCTION!)
# Generate with: openssl rand -base64 64
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production

# JWT access token expiration (e.g., 1h, 30m, 24h)
JWT_EXPIRES_IN=1h

# JWT refresh token expiration (e.g., 7d, 14d, 30d)
JWT_REFRESH_EXPIRES_IN=7d

# =============================================================================
# STRIPE PAYMENT CONFIGURATION (v2.6.0)
# =============================================================================

# Stripe Secret Key
# Test: sk_test_... (for development)
# Live: sk_live_... (for production)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# Stripe Webhook Secret
# Get from: https://dashboard.stripe.com/webhooks
# Format: whsec_...
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Frontend URL for Stripe redirects (success/cancel URLs)
FRONTEND_URL=https://your-frontend-domain.com

# =============================================================================
# AWS S3 CONFIGURATION (Optional - for e-CMR document storage)
# =============================================================================

# AWS Region
AWS_REGION=us-east-1

# AWS S3 Bucket for e-CMR documents
AWS_S3_BUCKET=rt-ecmr-documents

# AWS Access credentials (if not using IAM role)
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key

# =============================================================================
# YOUSIGN CONFIGURATION (Optional - for e-signatures)
# =============================================================================

# Yousign API Key
# YOUSIGN_API_KEY=your_yousign_api_key

# Yousign Environment (test, production)
# YOUSIGN_ENV=test

# =============================================================================
# EMAIL CONFIGURATION (Optional - for notifications)
# =============================================================================

# SMTP Configuration
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password

# From email address
# EMAIL_FROM=noreply@rt-group.com

# =============================================================================
# SYMPHONI.A - MAILGUN CONFIGURATION (Tracking Basic - 50€/mois)
# =============================================================================

# Mailgun API Key
# Get from: https://app.mailgun.com/app/account/security/api_keys
MAILGUN_API_KEY=your-mailgun-api-key

# Mailgun Domain
MAILGUN_DOMAIN=mg.yourdomain.com

# Email tracking sender
EMAIL_FROM=RT SYMPHONI.A <noreply@rt-technologie.com>

# Base URL for tracking email links
TRACKING_EMAIL_BASE_URL=https://rt-subscriptions-api-prod.eba-pwrpmmxu.eu-central-1.elasticbeanstalk.com

# =============================================================================
# SYMPHONI.A - TOMTOM TELEMATICS (Tracking Premium - 4€/véhicule/mois)
# =============================================================================

# TomTom API Key (Optional - Required for Premium Tracking)
# Get from: https://developer.tomtom.com/
# TOMTOM_API_KEY=your-tomtom-api-key

# TomTom Tracking API URL
# TOMTOM_TRACKING_API_URL=https://api.tomtom.com/tracking/1

# =============================================================================
# SYMPHONI.A - AWS TEXTRACT (OCR Primary - ~58€/mois pour 10k pages)
# =============================================================================

# AWS Textract Configuration (Optional - Required for OCR)
# AWS_ACCESS_KEY_ID=your-aws-access-key-id
# AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

# AWS Region for Textract (recommended: eu-central-1 for Europe)
AWS_REGION=eu-central-1

# =============================================================================
# SYMPHONI.A - GOOGLE VISION API (OCR Fallback - ~2€/mois pour 10k images)
# =============================================================================

# Google Vision API (Optional - Fallback if AWS Textract fails)
# GOOGLE_VISION_API_KEY=your-google-vision-api-key

# Path to Google Cloud service account JSON file
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/google-credentials.json

# =============================================================================
# SYMPHONI.A - SECURITY & TRACKING
# =============================================================================

# Secret key for tracking email token signing (SHA-256)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SECRET_KEY=your-secret-key-for-tracking-tokens-change-this

# Token expiration for tracking emails (in seconds, default: 86400 = 24h)
TRACKING_TOKEN_EXPIRES_IN=86400

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Rate limit window in milliseconds (default: 15 minutes = 900000ms)
RATE_LIMIT_WINDOW_MS=900000

# Max requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# CORS CONFIGURATION (Advanced)
# =============================================================================

# CORS allowed origins (comma-separated list)
# Examples:
#   - Development: http://localhost:3000,http://localhost:3001
#   - Production: https://app.symphonia.com,https://dashboard.symphonia.com
# Use '*' to allow all origins (NOT recommended for production)
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,https://your-frontend-domain.com

# CORS credentials (true/false)
CORS_CREDENTIALS=true

# =============================================================================
# API KEYS VALIDATION (Optional - for API key authentication)
# =============================================================================

# API Keys (comma-separated list) - Optional
# Used by validateApiKey middleware for API key authentication
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# API_KEYS=key1-xxxxxxxx,key2-yyyyyyyy,key3-zzzzzzzz

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# =============================================================================
# OVHCLOUD API CONFIGURATION (Gestion domaine et emails)
# =============================================================================

# OVHcloud Application Key
# Obtenez vos credentials sur: https://eu.api.ovh.com/createApp/
OVH_APP_KEY=your-ovh-application-key

# OVHcloud Application Secret
OVH_APP_SECRET=your-ovh-application-secret

# OVHcloud Consumer Key
# Généré après autorisation de l'application
OVH_CONSUMER_KEY=your-ovh-consumer-key

# OVHcloud Endpoint (ovh-eu, ovh-ca, ovh-us, etc.)
OVH_ENDPOINT=ovh-eu

# Nom de domaine principal géré
OVH_DOMAIN=rt-symphonia.com

# =============================================================================
# FEATURE FLAGS (Optional)
# =============================================================================

# Enable/disable features
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_SMS_NOTIFICATIONS=false
ENABLE_WEBHOOK_LOGGING=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Bcrypt salt rounds (default: 10)
BCRYPT_SALT_ROUNDS=10

# Session secret (if using sessions)
# SESSION_SECRET=your-session-secret

# =============================================================================
# DEVELOPMENT ONLY (DO NOT USE IN PRODUCTION)
# =============================================================================

# Enable debug mode
# DEBUG=true

# Mock payment processing (for development)
# MOCK_STRIPE_PAYMENTS=true

# =============================================================================
# NOTES
# =============================================================================

# 1. Never commit this file with real values to version control
# 2. Use environment-specific .env files (.env.development, .env.production)
# 3. Generate strong secrets with: openssl rand -base64 64
# 4. Rotate secrets regularly in production
# 5. Use AWS Secrets Manager or similar for production secrets
# 6. Configure these in Elastic Beanstalk: Configuration → Software → Environment Properties
