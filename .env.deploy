# Configuration Déploiement AWS - Symphonia Platform v2.2.0
# Copiez ce fichier et remplissez les valeurs
# Usage: source .env.deploy && bash scripts/deploy-aws.sh

################################################################################
# AWS Configuration
################################################################################

# Région AWS principale
export AWS_REGION=eu-west-3

# Compte AWS (optionnel, détecté automatiquement)
# export AWS_ACCOUNT_ID=123456789012

################################################################################
# MongoDB Configuration
################################################################################

# URI MongoDB (REQUIS)
# Format: mongodb://username:password@host:port/database?authSource=admin
export MONGODB_URI="mongodb://user:password@cluster.mongodb.net/?authSource=admin"

# Ou MongoDB Atlas:
# export MONGODB_URI="mongodb+srv://user:password@cluster.mongodb.net/?retryWrites=true&w=majority"

################################################################################
# AWS SES (Email Service)
################################################################################

# Domaine vérifié pour SES
export SES_DOMAIN="symphonia-controltower.com"

# Email sender (doit être vérifié dans SES)
export SES_FROM_EMAIL="ne-pas-repondre@symphonia-controltower.com"

################################################################################
# AWS SNS (SMS Alerts)
################################################################################

# Nom du topic SNS pour les alertes
export SNS_TOPIC_NAME="symphonia-alerts"

# Numéro de téléphone pour alertes SMS (format international)
export ALERT_SMS_NUMBER="+33612345678"

# Email pour alertes
export ALERT_EMAIL="admin@symphonia.com"

################################################################################
# S3 Bucket pour Packages
################################################################################

# Nom du bucket S3 (créé automatiquement si non existant)
# Par défaut: symphonia-deploy-packages-{AWS_ACCOUNT_ID}
# export S3_BUCKET_NAME="symphonia-deploy-packages"

################################################################################
# Elastic Beanstalk Configuration
################################################################################

# Préfixe des applications EB
# export APP_PREFIX="symphonia"

# Suffixe environnement (prod, staging, dev)
export ENV_SUFFIX="prod"

################################################################################
# JWT Secret (Authz Service)
################################################################################

# Secret JWT pour authentification (générez un secret fort)
export JWT_SECRET="RtProd2026KeyAuth0MainToken123456XY"

# Générer un nouveau secret:
# export JWT_SECRET=$(openssl rand -base64 32)

################################################################################
# Redis Configuration (Optionnel pour TMS Sync)
################################################################################

# URL Redis ElastiCache (optionnel, sinon fallback mémoire)
# export REDIS_URL="redis://symphonia-cache.abc123.euw3.cache.amazonaws.com:6379"

################################################################################
# TMS APIs Configuration
################################################################################

# Clés API TMS (si utilisées)
# export DASHDOC_API_KEY="your-dashdoc-api-key"
# export TRANSPOREON_API_KEY="your-transporeon-api-key"

################################################################################
# Deployment Options
################################################################################

# Attendre que les environnements soient prêts (true/false)
# Attention: peut prendre 5-10 minutes par service
export WAIT_FOR_READY=false

# Ignorer la validation post-déploiement (true/false)
export SKIP_VALIDATION=false

################################################################################
# Notes
################################################################################

# 1. AWS SES doit être en mode Production (pas Sandbox) pour envoyer à tous emails
#    Demandez production access via console AWS SES
#
# 2. Pour SMS via SNS, vérifiez que:
#    - Votre compte AWS a un quota SMS suffisant
#    - Le numéro est au format international: +33...
#
# 3. MongoDB URI doit autoriser les connexions depuis AWS Elastic Beanstalk
#    Ajoutez les IP EB dans la whitelist MongoDB Atlas
#
# 4. Première fois: Les environnements EB prendront 5-10 min à créer
#    Déploiements suivants: 2-3 min par service
